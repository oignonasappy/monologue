<!DOCTYPE html>
<html lang="ja">

<head prefix="og: https://ogp.me/ns#">

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!--general-->
    <link rel="stylesheet" href="../../general/css/common.css">
    <script src="../../general/js/common.js" type="module"></script>
    <link rel="shortcut icon" href="/monologue/favicon.ico" type="image/x-icon">
    
    <!--OGP-->
    <meta property="og:site_name" content="Monologue">
    <meta property="og:url" content="https://oignonasappy.github.io/monologue/pages/piano-js-lib/index.html">
    <meta property="og:type" content="website">
    <meta property="og:locale" content="ja_JP">
    
    <!--Prism.js-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.30.0/themes/prism-tomorrow.min.css">
    <!--<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.30.0/components/prism-core.min.js" defer></script>-->
    <!--<script
        src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.30.0/plugins/autoloader/prism-autoloader.min.js" defer></script>-->
    <!--Prism.js plugins-->
    <!--<script
        src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.30.0/plugins/normalize-whitespace/prism-normalize-whitespace.min.js" defer></script>-->
    <!--<script
        src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.30.0/plugins/line-numbers/prism-line-numbers.min.js" defer></script>-->
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.30.0/plugins/line-numbers/prism-line-numbers.min.css">

    <title>あなたのページに鍵盤を表示する[Piano.js]</title>
    <meta property="og:title" content="あなたのページに鍵盤を表示する[Piano.js]">
    <meta name="description" content="piano.js はhtml内に再生可能なピアノを埋め込むJavaScriptライブラリです。音楽の視覚的に解説したり、気軽にフレーズの共有をしたりするときに役立ちます。">
    <meta property="og:description" content="サイト上でピアノが弾けます！やったね！">

    <link rel="stylesheet" href="./style.css">
    <script src="./script.js" defer></script>
    <script src="https://oignonasappy.github.io/pianojs/v1.0.0/piano.js" defer></script>
</head>

<body>
    <div id="container">
        <main>
            <h1>Piano.js</h1>
            <p><dfn>piano.js</dfn>はhtml内に<wbr>再生可能な<wbr>ピアノを埋め込む<wbr>JavaScriptライブラリです。</p>
            <p><a href="https://github.com/oignonasappy/pianojs/" target="_blank" rel="noopener noreferrer"><img class="github-mark" src="/monologue/general/images/github-mark.svg" alt="github mark">github リンク</a></p>

            <section>
                <h3>プレビュー</h3>
                <h5 class="use-wbr" style="text-align:center;margin-bottom:1em;">2オクターブ分の通常のピアノ / C-コードをハイライト / 音名をGフリジアンとして表示</h5>
                <p style="text-align:center;margin-bottom:10px;font-size:0.8em;"><code class="lang-html">
                    &lt;div class="piano" data-first="60" data-last="84" data-key-width="20px" data-key-height="60px" data-highlight="72 75 79" data-highlight-color="#FFE0FF" data-notename="true" data-key-signature="G phr"&gt;&lt;/div&gt;
                </code></p>
                <div class="piano" data-first="60" data-last="84" data-key-width="20px" data-key-height="60px"
                    data-highlight="72 75 79" data-highlight-color="#FFE0FF" data-notename="true" data-key-signature="F dor"></div>
                <h5 class="use-wbr" style="text-align:center;margin-bottom:1em;">Aから2オクターブ分の通常のピアノ / FをGダブルフラットとして、AをGダブルシャープとして表示</h5>
                <p style="text-align:center;margin-bottom:10px;font-size:0.8em;"><code class="lang-html">
                    &lt;div class="piano" data-first="57" data-last="81" data-key-width="30px" data-key-height="70px" data-custom-notename="65 Gbb, 69 Gx"&gt;&lt;/div&gt;
                </code></p>
                <div class="piano" data-first="57" data-last="81" data-key-width="30px" data-key-height="70px" data-custom-notename="65 Gbb, 69 Gx"></div>
                <h5 class="use-wbr" style="text-align:center;margin-bottom:1em;">ホバーアニメーションのあるピアノ / EとF#をハイライト</h5>
                <p style="text-align:center;margin-bottom:10px;font-size:0.8em;"><code class="lang-html">
                    &lt;div class="piano-hover" data-first="48" data-last="60" data-highlight="52 54" data-highlight-color="rgb(223,255,255)"&gt;&lt;/div&gt;
                </code></p>
                <div class="piano-hover" data-first="48" data-last="60" data-highlight="52 54" data-highlight-color="rgb(223,255,255)"></div>
                <h5 class="use-wbr" style="text-align:center;margin-bottom:1em;">マウスクリックで三角波を再生するピアノ</h5>
                <p style="text-align:center;margin-bottom:10px;font-size:0.8em;"><code class="lang-html">
                    &lt;div class="piano-play" data-first="36" data-last="67" data-key-width="30px" data-key-height="90px"&gt;&lt;/div&gt;
                </code></p>
                <div class="piano-play" data-first="36" data-last="67" data-key-width="30px" data-key-height="90px"></div>
                <h5 class="use-wbr" style="text-align:center;margin-bottom:1em;">通常のピアノ / 下のボタンでハイライトされたC-13コードを再生 / 音名をFドリアンとして表示</h5>
                <p style="text-align:center;margin-bottom:10px;font-size:0.8em;"><code class="lang-html">
                    &lt;div id="piano1" class="piano" data-first="48" data-last="72" data-key-width="30px" data-key-height="120px" data-highlight="48 51 55 58 62 65 69" data-highlight-color="#FFFF00" data-notename="true" data-key-signature="C dor"&gt;&lt;/div&gt;
                </code></p>
                <div id="piano1" class="piano" data-first="48" data-last="72" data-key-width="30px" data-key-height="120px" data-highlight="48 51 55 58 62 65 69" data-highlight-color="#FFFF00" data-notename="true" data-key-signature="C dor"></div>
                <p style="text-align:center;">
                    <button type="button" onclick="playHighlighted('piano1')">playHighLighted()</button>
                </p>
                <h5 class="use-wbr" style="text-align:center;margin-bottom:1em;">マウスクリックでのこぎり波を再生する非常に広いピアノ / 下のボタンで巨大なコードや音楽を再生 / A4=432Hzチューニング / 音名をCミクソリディアンとして表示</h5>
                <p style="text-align:center;margin-bottom:10px;font-size:0.8em;"><code class="lang-html">
                    &lt;div id="piano2" class="piano-play" data-first="24" data-last="96" data-key-width="14px" data-key-height="60px" data-notename="true" data-key-signature="C mix" data-volume="0.2" data-duration="4" data-osc-type="sawtooth" data-tuning="432"&gt;&lt;/div&gt;
                </code></p>
                <div id="piano2" class="piano-play" data-first="24" data-last="96" data-key-width="14px" data-key-height="60px" data-notename="true" data-key-signature="C mix" data-volume="0.2" data-duration="4" data-osc-type="sawtooth" data-tuning="432"></div>
                <p style="text-align:center;">
                    <button type="button" onclick="playKeys('piano2', [24, 28, 31, 34, 38, 42, 45, 48, 52, 56, 59, 62, 66, 70, 73, 76, 80, 84, 87, 90, 94])">playKeys()</button>
                    <button type="button" onclick="sequencer((value)=>{
                        playKeys('piano2', value);
                    }, [1/8, 1/8, 1/8, 1/8, 1/8, 1/8, 1/8+0.01, 1/8+0.02, 1/8+0.03, 1/8+0.025, 1/8+0.02, 1/8+0.016, 1/8+0.012, 1/8+0.008, 1/8+0.004, 1/8, 3/8, 1/24, 1/24, 1/24, 0],
                    [[89,48,52,55],[88],[86],[84],[82,53,57,60],[81],[79],[77],[76,40,45,50,55],[74],[84,44,48,51],[82],[80],[78],[77,49,53,56],[75],[77,41,48,52,57],[29],[36],[43],[50]], 120)">sequencer()</button>
                </p>
                <h5 class="use-wbr" style="text-align:center;margin-bottom:1em;">様々な再生ボタン</h5>
                <p style="text-align:center;">
                    <button type="button" onclick="playNote(60, 0.3, 3, 'square')">playNote()</button>
                    <button type="button" onclick="playNoteAll([0,7,14,21,28,35,42,49,56,63,70,77,84,91,98], 0.2, 3, 'sawtooth')">playNoteAll()</button>
                    <button type="button" onclick="playNoteAll([60,60.2])">CHORUS</button>
                </p>
            </section>

            <section>
                <h2>つかいかた</h2>
                <section>
                    <h3>呼び出し</h3>
                    <ol>
                        <li>
                            <section>
                                <h4>JavaScriptの読み込み</h4>
                                <p>
                                    基本の機能は<wbr>piano.jsのみを読み込むことで<wbr>利用可能です。<br>
                                    <strong>defer属性</strong>を付与する必要があることに<wbr>注意してください。
                                </p>
                                <h4>ダウンロードして読み込み</h4>
                                <p>
                                    以下のリンクから<wbr>該当バージョンを選択し、<wbr>内部のpiano.jsをダウンロード<br>
                                    <a href="https://github.com/oignonasappy/pianojs/" target="_blank" rel="noopener noreferrer">https://github.com/oignonasappy/pianojs/</a>
                                </p>
                                <h4>github.ioからの読み込み(疑似<abbr title="Content Delivery Network">CDN</abbr>)</h4>
                                <p>
                                    以下コードを<span class="code">&lt;head&gt;</span>内にコピー [version : v1.0.0]<br>
                                    <code class="lang-html">&lt;script src="https://oignonasappy.github.io/pianojs/v1.0.0/piano.js" defer&gt;&lt;/script&gt;</code>
                                </p>
                            </section>
                        </li>
                        
                        <li>
                            <section>
                                <h4>&lt;div&gt;を配置</h4>
                                <p>記述例：</p>
                                <ul>
                                    <li>
                                        <code class="lang-html" title=".piano 最小例">&lt;div class="piano" data-first="48" data-last="60"&gt;&lt;/div&gt;</code>
                                        <div class="piano" data-first="48" data-last="60"></div>
                                    </li>
                                    <li>
                                        <code class="lang-html" title=".piano-hover 最大例">&lt;div class="piano-hover" data-first="21" data-last="108" data-key-width="10px" data-key-height="40px" data-highlight="46 50 57" data-highlight-color="#A0FFA0" data-notename="true" data-key-signature="G min" data-custom-notename="46 I, 50 III, 57 VII"&gt;&lt;/div&gt;</code>
                                        <div class="piano-hover" data-first="21" data-last="108" data-key-width="10px" data-key-height="40px" data-highlight="46 50 57" data-highlight-color="#A0FFA0" data-notename="true" data-key-signature="G min" data-custom-notename="46 I, 50 III, 57 VII"></div>
                                    </li>
                                    <li>
                                        <code class="lang-html" title=".piano-play 最大例">&lt;div class="piano-play" data-first="28" data-last="103" data-key-width="16px" data-key-height="60px" data-highlight="40 45 50 55 59 64" data-highlight-color="rgb(128,128,255)" data-notename="true" data-key-signature="e AEO" data-custom-notename="40 6, 45 5, 50 4, 55 3, 59 2, 64 1" data-volume="0.35" data-duration="2.5" data-osc-type="sine" data-tuning="427.474"&gt;&lt;/div&gt;</code>
                                        <div class="piano-play" data-first="28" data-last="103" data-key-width="16px" data-key-height="60px" data-highlight="40 45 50 55 59 64" data-highlight-color="rgb(128,128,255)" data-notename="true" data-key-signature="e AEO" data-custom-notename="40 6, 45 5, 50 4, 55 3, 59 2, 64 1" data-volume="0.15" data-duration="2.5" data-osc-type="sine" data-tuning="427.474"></div>
                                    </li>
                                </ul>
                                <h4>種類</h4>
                                <ul>
                                    <li>
                                        <h5><dfn>.piano</dfn></h5>
                                        <p>
                                            もっとも基本のピアノです。<br>
                                        </p>
                                    </li>
                                    <li>
                                        <h5><dfn>.piano-hover</dfn></h5>
                                        <p>
                                            <span class="code">.piano</span>の機能に追加で、<wbr>
                                            マウスカーソルに反応する<wbr>アニメーションを<wbr>追加します。
                                        </p>
                                    </li>
                                    <li>
                                        <h5><dfn>.piano-play</dfn></h5>
                                        <p>
                                            <span class="code">.piano-hover</span>の機能に追加で、<wbr>
                                            マウスでクリックすることで<wbr>音を鳴らすことができます。<br>
                                            残念ながら<wbr>スマホ上では弾けないこともないですが、<wbr>非常に不自由です。
                                        </p>
                                    </li>
                                </ul>
                            </section>
                        </li>
                    </ol>
                </section>
                
                <section>
                    <h3>データ属性</h3>
                    <p>
                        <span class="code">&lt;div&gt;</span>内に<wbr>
                        <code class="lang-html">data-*=""</code>の形でピアノに属性を設定します。
                    </p>
                    <ol>
                        <li>
                            <h4><dfn>data-first</dfn>, <dfn>data-last</dfn></h4>
                            <ul>
                                <li><span class="code">data-first: &lt;integer&gt; = 0 &lt;= x</span></li>
                                <li><span class="code">data-last: &lt;integer&gt; = data-first &lt;= x</span></li>
                                <li>記述例 : <code class="lang-html">data-first="48" data-last="79"</code></li>
                                <li>data-first既定 : <span class="code">60</span></li>
                                <li>data-last既定 : <span class="code">data-first+12</span></li>
                            </ul>
                            <p>
                                <abbr title="Musical Instrument Digital Interface">midi</abbr>の<wbr>
                                <dfn title="MIDI規格のノートナンバー">midi番号</dfn>で指定する、<wbr>表示する鍵盤の範囲です。<br>
                                0以上の整数であり、<wbr>data-lastは<wbr>data-first以上である<wbr>必要があります。<br>
                                data-lastは<wbr>それ自身の値も含みます(要するに"以下")
                            </p>
                        </li>
                        <li>
                            <h4><dfn>data-key-width</dfn>, <dfn>data-key-height</dfn></h4>
                            <ul>
                                <li><span class="code">data-key-width: &lt;length&gt; = 0 &lt; x</span></li>
                                <li><span class="code">data-key-height: &lt;length&gt; = 0 &lt; x</span></li>
                                <li>記述例 : <code class="lang-html">data-key-width="30px" data-key-height="120px"</code></li>
                                <li>data-key-width既定 : <span class="code">20px</span></li>
                                <li>data-key-height : <span class="code">60px</span></li>
                            </ul>
                            <p>
                                白鍵一つあたりのサイズです。<br>
                                <span class="code">30px</span>など、<wbr>CSSで使用可能な構文で<wbr>設定できます。<br>
                                黒鍵のサイズは<wbr>横幅0.7倍,縦幅0.6倍となります。<br>
                                ピアノ全体のサイズから<wbr>設定することはできません。<wbr>ｺﾞﾒﾝ＜(_ _)＞
                            </p>
                        </li>
                        <li>
                            <h4><dfn>data-highlight</dfn></h4>
                            <ul>
                                <li><span class="code">data-highlight: &lt;integer[*]&gt; = [data-first &lt;= x &lt;= data-last]*</span></li>
                                <li>記述例 : <code class="lang-html">data-highlight="59 63 69"</code></li>
                                <li>既定 : <span class="code"><i>なし</i></span></li>
                            </ul>
                            <p>
                                指定した鍵盤を<wbr>色付けして強調します。<br>
                                ハイライトする鍵盤のmidi番号を<wbr>スペース区切りで指定します。<br>
                                <span class="code">data-first, data-last</span>で設定した範囲内でないと<wbr>ハイライトされません。<wbr>
                                (後述する<span class="code">playHighlighted()</span>では機能します)
                            </p>
                        </li>
                        <li>
                            <h4><dfn>data-highlight-color</dfn></h4>
                            <ul>
                                <li><span class="code">data-highlight-color: &lt;color&gt; = x</span></li>
                                <li>記述例 : <code class="lang-html">data-highlight-color="#C0FFC0"</code></li>
                                <li>既定 : <span class="code">#FFE0E0</span></li>
                            </ul>
                            <p>
                                <u>※このデータ属性は<span class="code">data-highlight</span>が設定されているとき<wbr>のみ機能します。</u><br>
                                <span class="code">data-highlight</span>で設定した<wbr>ハイライトする鍵盤の色を設定します。<br>
                                <span class="code">#E0FFFF</span>や<span class="code">rgb(191,191,255)</span>など、<wbr>
                                CSSで使用可能な構文で<wbr>設定できます。
                            </p>
                        </li>
                        <li>
                            <h4><dfn>data-notename</dfn></h4>
                            <ul>
                                <li><span class="code">data-notename: &lt;boolean&gt; = "true" | "false"</span></li>
                                <li>記述例 : <code class="lang-html">data-notename="true"</code></li>
                                <li>既定 : <span class="code">false</span></li>
                            </ul>
                            <p>
                                鍵盤に<dfn title="アルファベットとオクターブ数で表す音の高さ">音名</dfn>の<wbr>ラベルを表示します。<br>
                                <span class="code">true</span>に設定すると表示します。<br>
                                黒鍵の<dfn title="音高を一時的に変化させることを表す記号">臨時記号</dfn>は<wbr>デフォルトで'<dfn title="臨時記号 シャープ(この記号はハッシュ)">#</dfn>'で表します。
                            </p>
                        </li>
                        <li>
                            <h4><dfn>data-key-signature</dfn></h4>
                            <ul>
                                <li><span class="code">data-key-signature: &lt;string[2]&gt; = (C ~ B) (lyd ~ loc)</span></li>
                                <li>記述例 : <code class="lang-html">data-key-signature="F Phr"</code></li>
                                <li>既定 : <span class="code">C Maj</span></li>
                            </ul>
                            <p>
                                <u>※このデータ属性は<span class="code">data-notename="true"</span>のときのみ機能します。</u><br>
                                <dfn title="スケールの七つの音の主音などを定めるもの">教会旋法</dfn><sup class="footnote">七つの正格旋法のみ</sup>に基づいた<wbr>調号を付与します。<br>
                                音名・<dfn title="教会旋法とおおむね同義">モード</dfn>を半角スペースで<wbr>区切ります。<wbr>大文字、小文字の区別は<wbr>ありません。<br>
                                音名には臨時記号を含めることができます。<wbr>シャープは'#'で表し、<wbr>フラットは'b'で表します。<wbr>
                                ここに含まれない臨時記号は<wbr>使用することができません。<br>
                                モードはモード名の<wbr>頭三文字の表記<wbr>
                                [<abbr title="リディアン旋法">Lyd</abbr>,
                                <abbr title="イオニアン旋法">Ion</abbr>(<abbr title="メジャースケール">Maj</abbr>),
                                <abbr title="ミクソリディアン旋法">Mix</abbr>,
                                <abbr title="ドリアン旋法">Dor</abbr>,
                                <abbr title="エオリアン旋法">Aeo</abbr>(<abbr title="マイナースケール">Min</abbr>),
                                <abbr title="フリジアン旋法">Phr</abbr>,
                                <abbr title="ロクリアン旋法">Loc</abbr>]<wbr>の中から<wbr>選択します。<wbr>
                                ここに含まれない<dfn title="音階">スケール</dfn>は<wbr><span class="code">data-custom-notename</span>から手動で<wbr>設定してください。<br>
                                調号が6個つく<wbr>「bと#が切り替わる地点」<wbr>(例えば、<dfn title="Gb Major">変ト長調</dfn>と<dfn title="F# Major">嬰ヘ長調</dfn>)<wbr>の場合<wbr>
                                bが6個の表記を<wbr>採用します。<wbr>(つまり、BはCbとして<wbr>表記します。)
                            </p>
                        </li>
                        <li>
                            <h4><dfn>data-custom-notename</dfn></h4>
                            <ul>
                                <li><span class="code">data-: &lt;integer, string&gt;[*] = [(data-first &lt;= x &lt;= data-last) (string)]*</span></li>
                                <li>記述例 : <code class="lang-html">data-custom-notename="66 F#, 70 Bb"</code></li>
                                <li>既定 : <span class="code"><i>なし</i></span></li>
                            </ul>
                            <p>
                                鍵盤上に任意の<wbr>ラベルを表示します。<br>
                                <span class="code">midi番号 文字列</span>のように2つセットで記述し、<wbr>
                                それぞれを<wbr>半角スペースで区切ります。<wbr>複数設定する際は<wbr>カンマ区切りで記述します。
                            </p>
                        </li>
                        <li>
                            <h4><dfn>data-volume</dfn> ※再生用</h4>
                            <ul>
                                <li><span class="code">data-volume: &lt;number&gt; = 0.0 &lt; x (&lt;= 1.0)</span></li>
                                <li>記述例 : <code class="lang-html">data-volume="0.25"</code></li>
                                <li>既定 : <span class="code">0.25</span></li>
                            </ul>
                            <p>
                                音量・振幅です。<br>
                                0.0以上1.0以下の<wbr>小数で設定します。<small style="font-size:0.5em;color:#888;">もし1.0以上の値に設定すると、音が歪みディストーションになります。後悔しても知りません。</small><br>
                                入力は対数スケールに変換され、<wbr>線形な音量変化になります。<br>
                                <strong>とても音が大きい<wbr>場合があります！</strong><wbr>
                                必ず小さい音量から<wbr>お試しください。<wbr>耳を痛めないように
                            </p>
                        </li>
                        <li>
                            <h4><dfn>data-duration</dfn> ※再生用</h4>
                            <ul>
                                <li><span class="code">data-duration: &lt;number&gt; = 0.0 &lt; x</span></li>
                                <li>記述例 : <code class="lang-html">data-duration="1.5"</code></li>
                                <li>既定 : <span class="code">2</span></li>
                            </ul>
                            <p>
                                音がフェードアウトし<wbr>消えるまでの時間を<wbr>秒単位で指定します。<br>
                            </p>
                        </li>
                        <li>
                            <h4><dfn>data-osc-type</dfn> ※再生用</h4>
                            <ul>
                                <li><span class="code">data-osc-type: &lt;string&gt; = sine | triangle | square | sawtooth</span></li>
                                <li>記述例 : <code class="lang-html">data-osc-type="square"</code></li>
                                <li>既定 : <span class="code">triangle</span></li>
                            </ul>
                            <p>
                                再生する音の<wbr>波形を指定します。<br>
                                [<dfn title="正弦波">sine</dfn>,
                                <dfn title="三角波">triangle</dfn>,
                                <dfn title="矩形波">square</dfn>,
                                <dfn title="のこぎり波">sawtooth</dfn>]<wbr>の中から<wbr>選択します。<br>
                                詳しくは<span class="code">OscillatorNode</span>の<wbr>
                                <a href="https://developer.mozilla.org/ja/docs/Web/API/OscillatorNode/type">ドキュメント</a>を<wbr>参照してください。
                            </p>
                        </li>
                        <li>
                            <h4><dfn>data-tuning</dfn> ※再生用</h4>
                            <ul>
                                <li><span class="code">data-tuning: &lt;number&gt; = 0.0 &lt; x</span></li>
                                <li>記述例 : <code class="lang-html">data-tuning="427.474"</code></li>
                                <li>既定 : <span class="code">440</span></li>
                            </ul>
                            <p>
                                <dfn title="A4の絶対的な周波数">基本周波数</dfn>を設定します。<br>
                                既定はA4=440Hzです。<br>
                                <s>私得である。</s>
                            </p>
                        </li>
                    </ol>
                </section>
                
                <section>
                    <h3>JavaScriptメソッド</h3>
                    <ol>
                        <li>
                            <h4><dfn>playNote()</dfn></h4>
                            <p>
                                単一の音を再生します。<br>
                                特定のピアノと<wbr>紐付ける必要はありません。
                            </p>
                            <h5>引数</h5>
                            <dl class="ordered-dl">
                                <dt>midi</dt>
                                <dd>{number} 再生する<wbr>midi番号です。<wbr>実は小数も指定する<wbr>ことができます。これにより<wbr>微分音を再生することが<wbr>可能です。</dd>
                                <dt>volume</dt>
                                <dd>{number} <span class="code">data-volume</span>と<wbr>同等です。</dd>
                                <dt>duration</dt>
                                <dd>{number} <span class="code">data-duration</span>と<wbr>同等です。</dd>
                                <dt>oscType</dt>
                                <dd>{string} <span class="code">data-osc-type</span>と<wbr>同等です。</dd>
                                <dt>tuning</dt>
                                <dd>{number} <span class="code">data-tuning</span>と<wbr>同等です。</dd>
                            </dl>
                            <p>
                                デフォルトを呼び出す際は引数に<code class="lang-js">undefined</code>を設定します。
                                <!--今後オブジェクト引数に書き直すかも-->
                            </p>
                            <h5>記述例</h5>
                            <pre><code class="lang-js">
                                playNote(60, 0.2, 1.5, "square", 442);
                            </code></pre>
                        </li>
                        <li>
                            <h4><dfn>playNoteAll()</dfn></h4>
                            <p>
                                第一引数<span class="code">midiArray</span>に設定した<wbr>
                                全てのmidi番号で<span class="code">playNote()</span>を実行します。
                            </p>
                            <h5>引数</h5>
                            <dl class="ordered-dl">
                                <dt>midiArray</dt>
                                <dd>{Array} 再生するmidi番号を<wbr>列挙した配列です。</dd>
                                <dt>volume</dt>
                                <dd>{number} <span class="code">data-volume</span>と<wbr>同等です。</dd>
                                <dt>duration</dt>
                                <dd>{number} <span class="code">data-duration</span>と<wbr>同等です。</dd>
                                <dt>oscType</dt>
                                <dd>{string} <span class="code">data-osc-type</span>と<wbr>同等です。</dd>
                                <dt>tuning</dt>
                                <dd>{number} <span class="code">data-tuning</span>と<wbr>同等です。</dd>
                            </dl>
                            <h5>記述例</h5>
                            <pre><code class="lang-js">
                                playNoteAll([60, 65, 69], 0.18, 3, "triangle", 415);
                            </code></pre>
                        </li>
                        <li>
                            <h4><dfn>playKeys()</dfn></h4>
                            <p>
                                ピアノに設定されている<wbr>パラメータで<wbr>音を再生します。<br>
                                ピアノの<span class="code">&lt;div&gt;</span>内に設定した<wbr>
                                <span class="code">id=""</span>で再生する<wbr>ピアノを選択します。<br>
                                以下これらの属性に<wbr>設定されている値を使用します。
                            </p>
                            <ol>
                                <li>data-volume</li>
                                <li>data-duration</li>
                                <li>data-osc-type</li>
                                <li>data-tuning</li>
                            </ol>
                            <h5>引数</h5>
                            <dl class="ordered-dl">
                                <dt>id</dt>
                                <dd>{string} 紐づける<wbr>ピアノのidです。</dd>
                                <dt>midiArray</dt>
                                <dd>{Array} 再生する鍵盤(midi番号)を<wbr>列挙した配列です。</dd>
                            </dl>
                            <h5>記述例</h5>
                            <pre><code class="lang-js">
                                playKeys("piano-alpha", [65, 69, 72, 76]);
                            </code></pre>
                        </li>
                        <li>
                            <h4><dfn>playHighlighted()</dfn></h4>
                            <p>
                                <span class="code">data-highlight</span>に設定されている鍵盤で<wbr>
                                <span class="code">playkeys()</span>を実行します。<br>
                            </p>
                            <h5>引数</h5>
                            <dl class="ordered-dl">
                                <dt>id</dt>
                                <dd>{string} 紐づける<wbr>ピアノのidです。</dd>
                            </dl>
                            <h5>記述例</h5>
                            <pre><code class="lang-js">
                                playHighLighted("piano-bravo");
                            </code></pre>
                        </li>
                        <li>
                            <h4><dfn>sequencer()</dfn></h4>
                            <p>
                                タイミング(リズム)に合わせて<wbr>コールバック関数を実行します。<br>
                                この関数は、<span class="code">values</span>の値で<wbr>
                                引数の関数を<span class="code">sequence</span>の分だけ<wbr>遅延させて実行する<wbr>関数です。<br>
                                本piano.jsの<span class="code">playKeys()</span>等と<wbr>併用すると<wbr>効果的でしょう。
                            </p>
                            <h5>引数</h5>
                            <dl class="ordered-dl">
                                <dt>callback</dt>
                                <dd>{Function} 指定された<wbr>タイミングに<wbr>呼び出される関数です。ラムダ推奨</dd>
                                <dt>sequence</dt>
                                <dd>{number} 次の関数呼び出しの際に<wbr>待機させる秒数です。</dd>
                                <dt>values</dt>
                                <dd>{Array} <span class="code">callback</span>に渡す<wbr>任意の値をもつ<wbr>配列です。</dd>
                                <dt>bpm</dt>
                                <dd>{number} <span class="code">sequence</span>に設定されている値の<wbr>1を全音符、1/4を1拍とした時の<wbr>BPMです。</dd>
                            </dl>
                            <h5>記述例 (PLAY SONGボタン)</h5>
                            <pre><code class="lang-js">
                                sequencer(
                                    (value) => {
                                        playKeys('piano2', value);
                                    },
                                    [1/8, 1/8, 1/8, 1/8, 1/8, 1/8, 1/8+0.01, 1/8+0.02, 1/8+0.03, 1/8+0.025, 1/8+0.02, 1/8+0.016, 1/8+0.012, 1/8+0.008, 1/8+0.004, 1/8, 3/8, 1/24, 1/24, 1/24, 0],
                                    [[89,48,52,55],[88],[86],[84],[82,53,57,60],[81],[79],[77],[76,40,45,50,55],[74],[84,44,48,51],[82],[80],[78],[77,49,53,56],[75],[77,41,48,52,57],[29],[36],[43],[50]],
                                    120
                                )
                            </code></pre>
                        </li>
                    </ol>
                </section>
            </section>

            <section>
                <h3>その他</h3>
                <p>
                    ピアノ全体に対して<wbr>スタイリングする時は、<wbr>
                    <code class="lang-html">.piano-wrapper</code>に対して<wbr>行うことを<wbr>推奨します。<wbr>
                    (このクラスは<wbr>ピアノ全体を<wbr>ラップしています)<br>
                    <code class="lang-css">margin: auto</code>などを<wbr>設定する際に<wbr>適しています。
                </p>
            </section>

            <section>
                <h3>感想</h3>
                <p>
                    要件定義は大事ですね。<br>
                    今回、<wbr>何もかも思いつきで<wbr>機能を追加していったので、<wbr>ソースコードに<wbr>まとまりが<wbr>なくなってしまいました。<wbr>今は多少改善していますが...
                </p>
                <p>
                    このブログで<wbr>記事を書いていくにあたって、<wbr>音楽についての<wbr>解説をするとき、どうするか。<br>
                    きっと、<wbr>目で見て分かる形で<wbr>解説できた方が<wbr>ずっといい。<br>
                    そう思って、<wbr>此れを作るに至ったのですね。<br>
                    このブログの一番目の記事に<wbr>ふさわしい内容にはなったかな？
                </p>
                <p>
                    非効率だと分かっていながら、<wbr>cssもhoverも<wbr>何もかも<wbr>一つのJavaScriptで<wbr>実装しました。<br>
                    なぜかと言えば<wbr>このpiano.jsを使用するとき、<wbr>このJavaScriptを<wbr>ただ一つだけ呼び出せば<wbr>よくなるから。<wbr>ホントにただそれだけです。
                </p>
            </section>

            <section>
                以下、piano.jsソースコードです。[version : v1.0.0]
                <pre style="height: 600px;"><code class="lang-js line-numbers" id="piano-js-src"></code></pre>
            </section>
            
            <section>
                <button type="button" style="display:block;margin:0 auto;" onclick="
                    sequencer(
                        (value) => {playKeys('deaf-to-all-but-the-song', value); console.log(value)},
                        [
                            1/16,1/16,1/16,1/16, 1/16,1/16,1/16,1/16, 1/16,1/16,1/16,1/16, 1/16,1/16,1/16,1/16,
                            1/16,1/16,1/16,1/16, 1/16,1/16,1/16,1/16, 1/16,1/16,1/16,1/16, 1/16,1/16,1/16,1/16,
                            1/16,1/16,1/16,1/16, 1/16,1/16,1/16,1/16, 1/16,1/16,1/16,1/16, 1/16,1/16,1/16,1/16,
                            1/16,1/16,1/16,1/16, 1/16,1/16,1/16,1/16, 1/16,1/16,1/16,1/16, 1/16,1/16,1/16,1/16,
                            1/16,1/16,1/16,1/16, 1/16,1/16,1/16,1/16, 1/16,1/16,1/16,1/16, 1/16,1/16,1/16,1/16,
                            1/16,1/16,1/16,1/16, 1/16,1/16,1/16,1/16, 1/16,1/16,1/16,1/16, 1/16,1/16,1/16,1/16,
                            1/16,1/16,1/16,1/16, 1/16,1/16,1/16,1/16, 1/16,1/16,1/16,1/16, 1/16,1/16,1/16,1/16,
                            1/16,1/16,1/16,1/16, 1/16,1/16,1/16,1/16, 1/16,1/16,1/16,1/16, 1/16,1/16,1/16,1/32,1/32,1/32,1/32,1/32,/*1/32,1/32,1/32,1/32,1/32,1/32,1/32,1/32,1/32,1/32,*/0
                        ],
                        [
                            [33],[35],[36],[40], [45,86.2],[47],[48,88.2],[52], [57,83.2],[59,84.2],[60,83.2],[64], [69,79.2],[71],[72,74.2],[76],
                            [81,76.2],[76],[72],[71], [69],[64],[60],[59], [57],[52],[48],[47], [45,86.2],[40],[36,88.2],[35],
                            [24,83.2],[29,84.2],[31,83.2],[36], [41,79.2],[43],[48,74.2],[53], [55,76.2],[60],[65],[67], [72,74.2],[77],[79,79.2],[84],
                            [79,76.2],[76],[74],[72], [67],[64],[62],[60], [55],[52],[50,64.2,69.2],[48], [43,68.2,71.2],[40],[38,67.2,72.2],[36],
                            [26,66.2,74.2],[28],[29],[33], [38],[40],[41],[45], [50,65.2,74.2],[52],[53],[57,69.2,76.2], [62],[64],[65,72.2,77.2],[69],
                            [40,71.2,74.2,79.2],[42],[44],[47], [50],[52],[54],[56], [59,71.2,76.2],[62],[64],[66,80.2,83.2], [68],[71],[74,81.2,84.2],[76],
                            [41],[45],[48],[52], [53,79.2,83.2],[57],[60],[64], [43,77.2,81.2],[47],[53,76.2,79.2],[56], [58,72.2,76.2],[62],[68,74.2,79.2],[70],
                            [45,64.2,73.2,81.2],[47],[49],[52], [57],[59],[61],[64], [69,61.1],[71,59.1],[73,57.1],[76,54.1], [81,52.1],[83,49.1],[85,47.1],[88,43.1],[85],[78],[71],[64],[57],/*[48],[53],[58],[63],[68],[73],[78],[83],[88],[93]*/
                        ],
                        160
                    )
                    " title="deaf-to-all-but-the-song" class="deaf-to-all-but-the-song">
                    <img class="mystia1" src="./images/mystia1.png" alt="mystia" height="30">
                    <img class="mystia2" src="./images/mystia2.png" alt="mystia" height="30">
                    <img class="mystia3" src="./images/mystia3.png" alt="mystia" height="30">
                </button>
                <div id="deaf-to-all-but-the-song" class="piano" data-volume="0.1" data-duration="1.2" data-osc-type="square" data-tuning="452.893" data-key-height="30px" data-key-width="9px" data-first="24" data-last="96"></div>
            </section>

            <small title="MonologueならぬPrologueだな(笑)">このページは当ブログでもっとも古い記事です。</small>
        </main>
    </div>
</body>

</html>
