<!DOCTYPE html>
<html lang="ja">

<head prefix="og: https://ogp.me/ns#">

    <meta name="local-env">

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!--general-->
    <link rel="stylesheet" href="../../general/css/common.css">
    <script src="../../general/js/common.js" type="module"></script>
    <link rel="shortcut icon" href="/monologue/favicon.ico" type="image/x-icon">

    <!--OGP-->
    <meta property="og:site_name" content="Monologue">
    <meta property="og:url" content="https://oignonasappy.github.io/monologue/pages/[FOLDER NAME IS HERE]/index.html">
    <meta property="og:type" content="website">
    <meta property="og:locale" content="ja_JP">

    <!--Prism.js-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.30.0/themes/prism-tomorrow.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.30.0/components/prism-core.min.js" defer></script>
    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.30.0/plugins/autoloader/prism-autoloader.min.js" defer></script>
    <!--Prism.js plugins-->
    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.30.0/plugins/normalize-whitespace/prism-normalize-whitespace.min.js" defer></script>
    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.30.0/plugins/line-numbers/prism-line-numbers.min.js" defer></script>
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.30.0/plugins/line-numbers/prism-line-numbers.min.css">

    <title>あなたのページに鍵盤を表示する[Piano.js]</title>
    <meta property="og:title" content="あなたのページに鍵盤を表示する[Piano.js]">
    <meta name="description" content="Lorem, ipsum.">
    <meta property="og:description" content="Lorem, ipsum.">

    <script src="./piano.js" defer></script>
</head>

<body>
    <div id="container">
        <main>

            <h3>プレビュー</h3>
            <div class="piano" data-first="60" data-last="84" data-key-width="20px" data-key-height="60px"
                data-highlight="72 75 79" data-highlight-color="#FFE0E0" data-notename="true" data-key-signature="F dor"></div>
            <div class="piano" data-first="57" data-last="81" data-key-width="30px" data-key-height="70px" data-custom-notename="65 Gbb, 69 Gx"></div>
            <div class="piano-hover" data-first="48" data-last="60" data-highlight="52 54" data-highlight-color="#E0FFFF"></div>
            <div class="piano-play" data-first="36" data-last="67" data-key-width="30px" data-key-height="90px" data-highlight="52 54" data-highlight-color="#E0FFFF"></div>
            <div id="piano1" class="piano" data-first="48" data-last="72" data-key-width="30px" data-key-height="120px" data-highlight="48 51 55 58 62 65 69" data-highlight-color="#FFFF00" data-notename="true" data-key-signature="C dor"></div>
            <button onclick="playHighlighted('piano1', 0.2, 3, 'sawtooth')">PLAY CHORD</button>
            <button onclick="playNote(40, 0.2, 3, 'square')">PLAY NOTE</button>
            <p>
                非効率だと分かっていながら、cssもhoverも何もかも一つのJavaScriptで実装しました。<br>
                なぜかと言えばこのpiano.jsを呼び出すとき、そのJavaScriptをただ一つだけ呼び出せばよくなるから。ホントにただそれだけです。
            </p>

            <pre><code class="lang-js line-numbers" id="piano-js-src"></code></pre>
            <script>
                fetch('./piano.js')
                .then(responce => responce.text())
                .then(text => {
                    document.getElementById('piano-js-src').textContent = text;
                })
                .catch(e => {
                    document.getElementById('piano-js-src').textContent = "/* うまくよみこめんかった */";
                });
            </script>

            <p>
                ソースコードがいささか汚いので、いつかリファクタリングするかも。
            </p>
        </main>
    </div>
</body>

</html>